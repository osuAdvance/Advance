name: Deploy

on:
  push:
    paths-ignore:
      - '.github/**'
    branches:
      - main
  workflow_dispatch:
# Jobs
jobs:
  Update:
    runs-on: self-hosted
    strategy:
      matrix:
        hosts: [lemres@10.40.10.106]
    steps:
    - name: Deploy new code, install dependencies and start Advance
      run: ssh ${{ matrix.hosts }} "cd ~/Advance && git pull && npm i && pm2 restart advance && pm2 save"